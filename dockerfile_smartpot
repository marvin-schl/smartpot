FROM python:3.7-buster
# install java on image
RUN apt-get update 
RUN apt-get install -y python3-pip
RUN pip3 install RPi.GPIO Adafruit_DHT smbus2 telepot
RUN groupadd -g 998 i2c
RUN useradd -ms /bin/bash smartpot
RUN usermod -aG root smartpot
RUN usermod -aG i2c smartpot
RUN usermod -aG kmem smartpot
USER smartpot
WORKDIR /home/smartpot

#setting up smartpot directory
COPY SmartPot ./SmartPot
COPY monitor.py .
COPY smartpot.log .
COPY smartpot.ini .
COPY TelegramSmartpot.py .

RUN touch Logging.csv
RUN touch smarpot.log

CMD python3 TelegramSmartpot.py
