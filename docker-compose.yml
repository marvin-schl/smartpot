version: "3.3"  # optional since v1.27.0
services:
  nodered:
    build:
      context: .
      dockerfile: dockerfile_nodered
    ports:
      - "1880:1880"
    volumes:
      - smartpot_data:/home/pi/smartpot
      - nodered_data:/data
  smartpot:
    build:
      context: .
      dockerfile: dockerfile_smartpot
    privileged: true
    volumes:
    - smartpot_data:/data
    - ${PWD}/smartpot.ini:/data/smartpot.ini
    - ${PWD}/smartpot.log:/data/smartpot.log

volumes:
  smartpot_data:
  nodered_data:
